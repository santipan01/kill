-- ===== ANTIDUPE RAYFIELD =====
pcall(function()
	for _,v in ipairs(game:GetService("CoreGui"):GetChildren()) do
		if v.Name:lower():find("rayfield") then
			v:Destroy()
		end
	end
end)

-- ===== SERVICES =====
local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local UserInputService = game:GetService("UserInputService")
local lp = Players.LocalPlayer

-- ===== LOAD GUI =====
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

-- ===== STATE =====
local StealFinder, GoToSteal, AutoSell, StealHop = false, false, false, false
local VoidSteal, StealProtecter = false, false
local StealKeyword, SellKeyword = "steal", "sell"
local respawnCF

-- ===== WINDOW =====
local Window = Rayfield:CreateWindow({
	Name = "Kill Game",
	LoadingTitle = "Kill Game",
	LoadingSubtitle = "Universal Kill",
	Theme = "Dark",
	ConfigurationSaving = {Enabled = false}
})

UserInputService.InputBegan:Connect(function(i,g)
	if not g and i.KeyCode == Enum.KeyCode.LeftControl then
		Rayfield:ToggleWindow()
	end
end)

-- ===== TABS =====
local Stealer = Window:CreateTab("Stealer", 4483362458)
local More = Window:CreateTab("More", 4483362458)

-- ===== UI TOGGLES =====
Stealer:CreateToggle({Name="Steal Finder", Callback=function(v) StealFinder=v end})
Stealer:CreateToggle({Name="Go To Steal", Callback=function(v) GoToSteal=v end})
Stealer:CreateToggle({Name="Auto Sell", Callback=function(v) AutoSell=v end})
Stealer:CreateToggle({Name="Steal Hop", Callback=function(v) StealHop=v end})
Stealer:CreateToggle({Name="Void Steal", Callback=function(v) VoidSteal=v end})
Stealer:CreateToggle({Name="Steal Protecter", Callback=function(v) StealProtecter=v end})

Stealer:CreateButton({Name="Back to Respawn", Callback=function()
	if respawnCF and lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then
		lp.Character.HumanoidRootPart.CFrame = respawnCF
	end
end})

-- ===== CHARACTER TRACK =====
local function onChar(char)
	task.wait(1)
	local hrp = char:FindFirstChild("HumanoidRootPart")
	if hrp then respawnCF = hrp.CFrame end
end
if lp.Character then onChar(lp.Character) end
lp.CharacterAdded:Connect(onChar)

-- ===== MAIN LOOP ULTRA-LIGERO =====
task.spawn(function()
	while true do
		local char = lp.Character
		local hrp = char and char:FindFirstChild("HumanoidRootPart")
		local hum = char and char:FindFirstChildOfClass("Humanoid")
		local found = false

		if hrp then
			-- VOID STEAL
			if VoidSteal then
				hrp.CFrame = hrp.CFrame * CFrame.new(0,1,0)
				task.wait(0.1)
				hrp.CFrame = hrp.CFrame * CFrame.new(0,-1,0)
			end

			-- STEAL PROTECTER (AntiHit/AntiFling/AntiVoid)
			if StealProtecter then
				hrp.AssemblyLinearVelocity = Vector3.new(0,0,0)
				hrp.AssemblyAngularVelocity = Vector3.new(0,0,0)
				if hum then hum.PlatformStand = false end
				if hrp.Position.Y < 5 then
					hrp.CFrame = respawnCF or CFrame.new(hrp.Position.X,10,hrp.Position.Z)
				end
			end

			-- PROXIMITY PROMPTS
			for _,p in ipairs(workspace:GetDescendants()) do
				if p:IsA("ProximityPrompt") and p.Enabled then
					local txt = ((p.Name or "")..(p.ActionText or "")..(p.ObjectText or "")):lower()

					-- STEAL
					if txt:find(StealKeyword) then
						found = true
						if StealFinder then fireproximityprompt(p) end
						if GoToSteal then
							local part = p.Parent
							while part and not part:IsA("BasePart") do part = part.Parent end
							if part then
								hrp.CFrame = part.CFrame * CFrame.new(0,0,-2)
								task.wait(0.05)
								fireproximityprompt(p)
							end
						end
					end

					-- AUTO SELL SOLO PARA "sell"
					if AutoSell and txt:find(SellKeyword) then
						fireproximityprompt(p)
					end
				end
			end

			if StealHop and not found then
				TeleportService:Teleport(game.PlaceId)
			end
		end

		task.wait(0.15)
	end
end)

Rayfield:Notify({
	Title="Kill Game",
	Content="Stable version with VoidSteal, Protecter & AutoSell filtered loaded",
	Duration=3
})
